# Laravel Lesson レビュー①

## Todo一覧機能

### Todoモデルのallメソッドで実行しているSQLは何か
> すべてのレコードを取得したいため、select文を実行している

### Todoモデルのallメソッドの返り値は何か
> Illuminate\Database\Eloquent\Collectionクラスのインスタンス

### 配列の代わりにCollectionクラスを使用するメリットは
> インスタンスを返すため配列操作に便利なメソッドが使用できること

### view関数の第1・第2引数の指定と何をしているか
> 第1引数：表示したい画面のbladeファイル名を指定
> 第2引数：渡したいデータを連想配列の形で渡している
> コントローラーからbladeファイルへデータを渡している

### index.blade.phpの$todos・$todoに代入されているものは何か
> `$todos`: todosテーブルから取得した全レコードが格納されているコレクションインスタンス
> `$todo`: 1つ1つのレコードのtodoインスタンス


## Todo作成機能

### Requestクラスのallメソッドは何をしているか
> フォームから送信された値を連想配列で一括取得している

- 一括で取得している理由は保守性を高めるため。
  - Requestクラスのinputメソッドで個別で入力値を取得することもできるが、それだと入力値が増えたときにコードの記述量が増え修正箇所も増えるため保守性の低いコードとなる


### fillメソッドは何をしているか
> モデルのtodoインスタンスの各プロパティに一括でフォーム入力値を代入している

- 今回はデータベースのカラム名`content`とinputタグのname属性`content`が同じなので`all`メソッドが使える

### $fillableは何のために設定しているか
> 一括代入の脆弱性対策のため

- モデルに代入可能なプロパティをfillableに記述することで、$fillableで許可していないカラムは意図せず更新されることを防げる

### saveメソッドで実行しているSQLは何か
> ユーザーの入力内容をDBに保存（挿入）するのでINSERT文

### redirect()->route()は何をしているか
> リダイレクト処理

- `redirect`関数はヘルパー関数で`Redirector`インスタンスを返す。そこに定義されている`route`メソッドを呼び出し、引数にはルート名を指定する
  - 他にも`to`メソッドを使ってURLを直接指定してページ遷移も可能だが、`route`であればルート名さえ変わらなければコードを修正する必要がないというメリットがある

## その他

### テーブル構成をマイグレーションファイルで管理するメリット
> DBの学習コストが不要
> Gitでファイル管理することで開発者全員が同じテーブルを作成できる

### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
> up: `php artisan migrate`

> down: `php artisan migrate:rollback`

### Seederクラスの役割は何か
> DBにテストデータを挿入する

### route関数の引数・返り値・使用するメリット
> 引数：ルート名

> 返り値：`RedirectResponse`インスタンス

> メリット：ルート名を引数に取ることでURLを指定しないで済むので保守性が高くなる

### @extends・@section・@yieldの関係性とbladeを分割するメリット
> `@extends`: 共通部分のレイアウトを記載したファイル

> `@section`: 動的に変化する画面内容を記載

> `@yield`: @sectionを挿入する部分

### @csrfは何のための記述か
> csrf対策のため

### {{ }}とは何の省略系か
> xss対策でありhtmlspecialcharsの省略形
